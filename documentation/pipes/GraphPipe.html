<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>vinci-predictions documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">vinci-predictions documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content pipe">
                   <div class="content-data">











<ol class="breadcrumb">
  <li>Pipes</li>
  <li >GraphPipe</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">

        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/utils/tools/filtres.pipe.ts</code>
        </p>


            <p class="comment">
                <h3>Description</h3>
            </p>
            <p class="comment">
                <p>Set data for graph on chartjs</p>

            </p>


        <section>
            <h3>Metadata</h3>
            <table class="table table-sm table-hover metadata">
                <tbody>
                    <tr>
                        <td class="col-md-3">Name</td>
                        <td class="col-md-9">graph</td>
                    </tr>
                </tbody>
            </table>
        </section>

            <section>
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="transform"></a>
                    <span class="name">
                        <span ><b>transform</b></span>
                        <a href="#transform"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>transform(gds: literal type, config: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>, debut: number | null, fin: number | null, chart: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="98"
                            class="link-to-prism">src/app/utils/tools/filtres.pipe.ts:98</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>gds</td>
                                    <td>
                                            <code>literal type</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Arrays of graph data</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>config</td>
                                    <td>
                                                <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Start and end point from configuration</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>debut</td>
                                    <td>
                                            <code>number | null</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Start array reduction</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>fin</td>
                                    <td>
                                            <code>number | null</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Shorten the array</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>chart</td>
                                    <td>
                                                <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>{}</code>

                    </div>
                    <div class="io-description">
                        <p>graphDataset</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { NumberFormatStyle } from &#x27;@angular/common&#x27;;
import { Pipe, PipeTransform } from &#x27;@angular/core&#x27;;
import { marked } from &#x27;marked&#x27;;
import { GraphI, GraphSetI } from &#x27;src/app/predictions/utils/modeles/graph-i&#x27;;
import { DatasetI, RendementI } from &#x27;../modeles/filtres-i&#x27;;

marked.setOptions({
  // renderer: new marked.Renderer(),
  pedantic: false,
  gfm: false,
  headerIds: false,
  breaks: true,
  smartLists: true,
  smartypants: false,
  xhtml: true
});

@Pipe({
  name: &#x27;filtres&#x27;
})
export class FiltresPipe implements PipeTransform {
  /**
   * Filter wine data
   * @param values Array of data to filter
   * @param args List of arguments send from filter forms
   * @returns Array of wine data
   */
  transform(values: Array&lt;any&gt;, args: any): Array&lt;RendementI&gt; {
    if (!args) return values;
    if (!values) return [];
    // Filters based on Rendement interface
    const data: Array&lt;RendementI&gt; &#x3D; [];
    values.filter(v &#x3D;&gt; {
      if (args.pdo.indexOf(v.pdo) !&#x3D; -1) {
        data.push(v);
      } else if (args.regions.indexOf(v.regions) !&#x3D; -1) {
        data.push(v);
      } else if (args.pays.indexOf(v.pays) !&#x3D; -1) {
        data.push(v);
      }
      // } else if (args.type &#x3D;&#x3D; v.type.toLowerCase()) {
      //   data.push(v);
      // }
    });
    return data.length &gt; 0 ? data : values;
  }
}
/** Set range for years filters */
@Pipe({
  name: &#x27;ecarts&#x27;
})
export class EcartsPipe implements PipeTransform {
  /**
   * Filter wine data
   * @param values Array of data to filter
   * @param args List of arguments send from filter forms
   * @returns Array of wines data
   */
  transform(values: Array&lt;number&gt;, ecart: number, ordre: number &#x3D; 0): Array&lt;number&gt; {
    if (!ecart) return values;
    if (!values) return [];
    return ordre &#x3D;&#x3D; 0 ? values.slice(0, ecart) : values.slice(ecart, values.length);
  }
}
/** FIltrer les données Markdown */
@Pipe({
  name: &#x27;md&#x27;
})
export class MarkPipe implements PipeTransform {

  transform(value: any): any {
    if (value &amp;&amp; value.length &gt; 0) {
      value &#x3D; value.replaceAll(&#x27;  &#x27;, &#x27;\n\n&#x27;);
      console.log(marked(value));
      // console.log(marked(&quot;Pour les professionnels du vin\n\nLe compte vous permet d’accéder aux données de prédiction correspondants à vos besoins. La plateforme vous offre une opportunité d’augmenter vos marges en vous donnant des informations sur la productivité des vignes et les marchés internationaux. La plateforme VInci est votre porte d’entrée vers des outils regroupés vers des organismes de recherche privés et publics.\n\n### Comment procéder ? Remplissez le formulaire ci-contre. Un email de confirmation vous sera transmis pour valider votre adresse email. Vous aurez alors accès aux données gratuites.\n\nUn code peut être saisi. Il vous sera fourni par des organismes tiers pour vous permettre d’accéder à des données complémentaires. Les gestionnaires de la plateforme peuvent prendre l’initiative de désactiver un compte. Un message vous sera transmis si un tel événement devait se produire.\n\n### Les données personnelles Des données personnelles sont nécessaires pour l’accès à la plateforme. Celles-ci sont supprimées avec la suppression du compte utilisateur. Pour plus d&amp;#39;informations, accédez à la page dédiée.&quot;), typeof value);
      return marked(value);
    }
    return value;
  }
}
/** Set data for graph on chartjs
 * @param {Array&lt;any&gt;} values The initial data to transform
 * @param {any} args All filters to consider
*/
@Pipe({
  name: &#x27;graph&#x27;
})
export class GraphPipe implements PipeTransform {

  /**
   *
   * @param gds Arrays of graph data
   * @param config Start and end point from configuration
   * @param debut Start array reduction
   * @param fin Shorten the array
   * @returns graphDataset
   */
  transform(gds:{labels:Array&lt;NumberFormatStyle&gt;, datasets:Array&lt;DatasetI&gt;}, config:any, debut:number | null, fin:number | null, chart:any) {
    if (!debut || debut &#x3D;&#x3D; 0) return gds;
    if (!fin || fin &#x3D;&#x3D; 0) return gds;
    if(!config) return gds;
    if (!gds) return [];

    gds.labels.splice(0, config.debut-debut).splice(gds.labels.length, -(fin - config.fin) );
    gds.datasets.forEach(ds &#x3D;&gt; {
      ds.data.splice(0, config.debut-debut).splice(ds.data.length, -(fin - config.fin) );
    }
    )
    return gds;
  }
}
/**
 * Filter wine types in visualisation page
 */
@Pipe({
  name: &#x27;types&#x27;
})
export class TypesPipe implements PipeTransform {

  transform(values: Array&lt;any&gt;, type: string | null) {
    if (!type || type.length &#x3D;&#x3D; 0) return values;
    if (!values) return [];

    return values.filter(v &#x3D;&gt; v.type &#x3D;&#x3D; type);
  }
}
/**
 * Filter wine types in visualisation page
 */
 @Pipe({
  name: &#x27;profils&#x27;
})
export class ProfilsPipe implements PipeTransform {

  transform(profils: Array&lt;any&gt;, str: string | null) {
    if (!str || str.length &#x3D;&#x3D; 0) return profils;
    if (!profils) return [];

    return profils.filter(p &#x3D;&gt; p.nom.toLowerCase().indexOf(str.toLowerCase()) !&#x3D; -1 || p.prenom.toLowerCase().indexOf(str.toLowerCase()) !&#x3D; -1 || p.ville.toLowerCase().indexOf(str.toLowerCase()) !&#x3D; -1);
  }
}
</code></pre>
    </div>

</div>










                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'pipe';
            var COMPODOC_CURRENT_PAGE_URL = 'GraphPipe.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
